import { defineNuxtPlugin, refreshNuxtData } from "#app";
const pkgName = "@nuxtjs/prismic";
export default defineNuxtPlugin((nuxtApp) => {
  const mergedOptions = nuxtApp.payload.config[pkgName] ?? nuxtApp.payload.config.public[pkgName] ?? {};
  if (mergedOptions.preview) {
    window.addEventListener("prismicPreviewUpdate", (event) => {
      event.preventDefault();
      refreshNuxtData();
    });
  }
});
